{"version":3,"file":"ReportDetailsEventsTable.esm.js","sources":["../../../src/components/ReportDetailsPage/ReportDetailsEventsTable.tsx"],"sourcesContent":["/*\n * Copyright 2022 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport Typography from '@material-ui/core/Typography';\nimport React from 'react';\nimport { puppetDbApiRef, PuppetDbReportEvent } from '../../api';\nimport {\n  ResponseErrorPanel,\n  Table,\n  TableColumn,\n} from '@backstage/core-components';\nimport useAsync from 'react-use/esm/useAsync';\nimport { useApi } from '@backstage/core-plugin-api';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { StatusField } from '../StatusField';\n\ntype ReportEventsTableProps = {\n  hash: string;\n};\n\nconst useStyles = makeStyles(theme => ({\n  empty: {\n    padding: theme.spacing(2),\n    display: 'flex',\n    justifyContent: 'center',\n  },\n}));\n\n/**\n * Component for displaying PuppetDB report events.\n *\n * @public\n */\nexport const ReportDetailsEventsTable = (props: ReportEventsTableProps) => {\n  const { hash } = props;\n  const puppetDbApi = useApi(puppetDbApiRef);\n  const classes = useStyles();\n  const { value, loading, error } = useAsync(async () => {\n    return puppetDbApi.getPuppetDbReportEvents(hash);\n  }, [puppetDbApi, hash]);\n\n  if (error) {\n    return <ResponseErrorPanel error={error} />;\n  }\n\n  const columns: TableColumn<PuppetDbReportEvent>[] = [\n    {\n      title: 'Run Start Time',\n      field: 'run_start_time',\n      align: 'center',\n      width: '300px',\n      render: rowData => (\n        <Typography noWrap>\n          {new Date(Date.parse(rowData.run_start_time)).toLocaleString()}\n        </Typography>\n      ),\n    },\n    {\n      title: 'Run End Time',\n      field: 'run_end_time',\n      align: 'center',\n      width: '300px',\n      render: rowData => (\n        <Typography noWrap>\n          {new Date(Date.parse(rowData.run_end_time)).toLocaleString()}\n        </Typography>\n      ),\n    },\n    {\n      title: 'Containing Class',\n      field: 'containing_class',\n      render: rowData => (\n        <Typography noWrap title={rowData.file || ''}>\n          {rowData.containing_class}\n        </Typography>\n      ),\n    },\n    {\n      title: 'Resource',\n      field: 'resource_title',\n      render: rowData => (\n        <Typography noWrap>\n          {rowData.resource_type}[{rowData.resource_title}]\n        </Typography>\n      ),\n    },\n    {\n      title: 'Property',\n      field: 'property',\n      render: rowData => <Typography noWrap>{rowData.property}</Typography>,\n    },\n    {\n      title: 'Old Value',\n      field: 'old_value',\n      render: rowData => <Typography noWrap>{rowData.old_value}</Typography>,\n    },\n    {\n      title: 'New Value',\n      field: 'new_value',\n      render: rowData => <Typography noWrap>{rowData.new_value}</Typography>,\n    },\n    {\n      title: 'Status',\n      field: 'status',\n      render: rowData => <StatusField status={rowData.status} />,\n    },\n  ];\n\n  return (\n    <Table\n      options={{\n        sorting: true,\n        actionsColumnIndex: -1,\n        loadingType: 'linear',\n        padding: 'dense',\n        showEmptyDataSourceMessage: !loading,\n        showTitle: true,\n        toolbar: true,\n        pageSize: 10,\n        pageSizeOptions: [10],\n      }}\n      emptyContent={\n        <Typography color=\"textSecondary\" className={classes.empty}>\n          No events\n        </Typography>\n      }\n      title=\"Latest events\"\n      columns={columns}\n      data={value || []}\n      isLoading={loading}\n    />\n  );\n};\n"],"names":[],"mappings":"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"}