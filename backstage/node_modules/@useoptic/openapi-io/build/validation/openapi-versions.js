"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.checkOpenAPIVersion = void 0;
const semver_1 = __importDefault(require("semver"));
const errors_1 = require("./errors");
function checkOpenAPIVersion(spec) {
    if (spec.openapi && semver_1.default.satisfies(spec.openapi, '3.1.x'))
        return '3.1.x';
    if (spec.openapi && semver_1.default.satisfies(spec.openapi, '3.0.x'))
        return '3.0.x';
    if (spec.swagger &&
        (spec.swagger === '2.0' || semver_1.default.satisfies(spec.swagger, '2.x.x')))
        return '2.x.x';
    throw new errors_1.OpenAPIVersionError(`Unsupported OpenAPI version ${spec.openapi ?? spec.swagger}. Optic supports OpenAPI 3.1.x and 3.0.x`, spec.openapi ?? spec.swagger);
}
exports.checkOpenAPIVersion = checkOpenAPIVersion;
//# sourceMappingURL=openapi-versions.js.map