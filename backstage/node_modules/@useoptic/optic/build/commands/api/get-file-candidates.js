"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.getFileCandidates = getFileCandidates;
var _promises = _interopRequireDefault(require("node:fs/promises"));
var _path = _interopRequireDefault(require("path"));
async function getFileCandidates(opts) {
  const files = [];
  const stack = [process.cwd()];
  while (stack.length > 0) {
    const dir = stack.pop();
    for (const file of await _promises.default.readdir(dir, {
      withFileTypes: true
    })) {
      const absolutePath = _path.default.join(dir, file.name);
      if (!absolutePath.startsWith(opts.startsWith)) {
        continue;
      }
      if (file.isDirectory()) {
        stack.push(absolutePath);
      } else if (/\.(json|ya?ml)$/i.test(file.name)) {
        files.push(absolutePath);
      }
    }
  }
  return files;
}