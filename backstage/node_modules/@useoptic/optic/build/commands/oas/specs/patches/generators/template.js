"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.templatePatches = templatePatches;
var _fastJsonPatch = _interopRequireDefault(require("fast-json-patch"));
var _patches = require("../../../../capture/patches/patchers/spec/patches");
function* templatePatches(spec, template, options) {
  let observer = _fastJsonPatch.default.observe(spec);
  template.patchGenerator(spec, options, {}); // TODO: error handling

  let operations = _fastJsonPatch.default.generate(observer);
  yield {
    impact: [_patches.PatchImpact.BackwardsCompatibilityUnknown],
    diff: undefined,
    path: '/',
    description: `changes made through applying '${template.name}' template`,
    // TODO: allow template control more specifically
    groupedOperations: [...operations]
  };
}