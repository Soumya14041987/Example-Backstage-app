"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.uploadFileToS3 = exports.downloadFileFromS3 = void 0;
var _nodeFetch = _interopRequireDefault(require("node-fetch"));
const uploadFileToS3 = async (signedUrl, file, additionalHeaders = {}) => {
  await (0, _nodeFetch.default)(signedUrl, {
    method: 'PUT',
    headers: {
      ...additionalHeaders,
      'x-amz-server-side-encryption': 'AES256'
    },
    body: file
  }).then(async response => {
    if (!response.ok) {
      const text = await response.text();
      throw new Error(`${response.status} ${response.statusText} \n${text}`);
    }
  });
};
exports.uploadFileToS3 = uploadFileToS3;
const downloadFileFromS3 = async (signedUrl, additionalHeaders = {}) => {
  return await (0, _nodeFetch.default)(signedUrl, {
    method: 'GET',
    headers: {
      ...additionalHeaders
    }
  }).then(async response => {
    if (!response.ok) {
      const text = await response.text();
      throw new Error(`${response.status} ${response.statusText} \n${text}`);
    }
    return response.text();
  });
};
exports.downloadFileFromS3 = downloadFileFromS3;