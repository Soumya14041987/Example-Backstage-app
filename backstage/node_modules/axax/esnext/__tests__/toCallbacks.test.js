"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const of_1 = require("../of");
const toCallbacks_1 = require("../toCallbacks");
const wait_1 = require("../wait");
test("toCallback", async () => {
    let callbackCounter = 0;
    const callback = async (result) => {
        // add some race condition when first value appears
        if (callbackCounter === 0) {
            await wait_1.wait(10);
        }
        expect(result.value).toEqual(callbackCounter);
        callbackCounter += 1;
    };
    const values = [0, 1, 2];
    await toCallbacks_1.toCallbacks(callback)(of_1.of(...values));
    expect(callbackCounter).toEqual(values.length);
});
